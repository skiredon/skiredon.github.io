function cuselScrollToCurent(e){var s=null;if(e.find(".cuselOptHover").eq(0).is("span")?s=e.find(".cuselOptHover").eq(0):e.find(".cuselActive").eq(0).is("span")&&(s=e.find(".cuselActive").eq(0)),e.find(".jScrollPaneTrack").eq(0).is("div")&&s){var i=s.position(),t=e.find(".cusel-scroll-pane").eq(0).attr("id");jQuery("#"+t)[0].scrollTo(i.top)}}function cuselShowList(e){var s=e.parent(".cusel");if("none"==e.css("display")){$(".cusel-scroll-wrap").css("display","none"),$(".cuselOpen").removeClass("cuselOpen"),s.addClass("cuselOpen"),e.css("display","block");var i=!1;-1!=s.prop("class").indexOf("cuselScrollArrows")&&(i=!0),e.find(".jScrollPaneContainer").eq(0).is("div")||e.find("div").eq(0).jScrollPaneCusel({showArrows:i}),cuselScrollToCurent(e)}else e.css("display","none"),s.removeClass("cuselOpen")}function cuSelRefresh(e){var s,i=e.refreshEl.split(","),t=i.length;for(s=0;s<t;s++){var l=jQuery(i[s]).parents(".cusel").find(".cusel-scroll-wrap").eq(0);l.find(".cusel-scroll-pane").jScrollPaneRemoveCusel(),l.css({visibility:"hidden",display:"block"});var r=l.find("span"),n=r.eq(0).outerHeight();r.length>e.visRows?l.css({height:n*e.visRows+"px",display:"none",visibility:"visible"}).children(".cusel-scroll-pane").css("height",n*e.visRows+"px"):l.css({display:"none",visibility:"visible"})}}function cuSel(e){function s(){jQuery("html").unbind("click"),jQuery("html").click(function(e){var s=jQuery(e.target),i=(s.attr("id"),s.prop("class"));if(-1==i.indexOf("cuselText")&&-1==i.indexOf("cuselFrameRight")||-1!=s.parent().prop("class").indexOf("classDisCusel"))if(-1!=i.indexOf("cusel")&&-1==i.indexOf("classDisCusel")&&s.is("div")){var t=s.find(".cusel-scroll-wrap").eq(0);cuselShowList(t)}else if(s.is(".cusel-scroll-wrap span")&&-1==i.indexOf("cuselActive")){var l;l=void 0==s.attr("val")?s.text():s.attr("val"),s.parents(".cusel-scroll-wrap").find(".cuselActive").eq(0).removeClass("cuselActive").end().parents(".cusel-scroll-wrap").next().val(l).end().prev().text(s.text()).end().css("display","none").parent(".cusel").removeClass("cuselOpen"),s.addClass("cuselActive"),s.parents(".cusel-scroll-wrap").find(".cuselOptHover").removeClass("cuselOptHover"),-1==i.indexOf("cuselActive")&&s.parents(".cusel").find(".cusel-scroll-wrap").eq(0).next("input").change()}else{if(s.parents(".cusel-scroll-wrap").is("div"))return;jQuery(".cusel-scroll-wrap").css("display","none").parent(".cusel").removeClass("cuselOpen")}else cuselShowList(t=s.parent().find(".cusel-scroll-wrap").eq(0))}),jQuery(".cusel").unbind("keydown"),jQuery(".cusel").keydown(function(e){var s;if(window.event?s=window.event.keyCode:e&&(s=e.which),null==s||0==s||9==s)return!0;if(-1!=jQuery(this).prop("class").indexOf("classDisCusel"))return!1;if(40==s){if((t=jQuery(this).find(".cuselOptHover").eq(0)).is("span"))l=t;else l=jQuery(this).find(".cuselActive").eq(0);var i=l.next();return!!i.is("span")&&(jQuery(this).find(".cuselText").eq(0).text(i.text()),l.removeClass("cuselOptHover"),i.addClass("cuselOptHover"),$(this).find("input").eq(0).val(i.attr("val")),cuselScrollToCurent($(this).find(".cusel-scroll-wrap").eq(0)),!1)}if(38==s){var t=$(this).find(".cuselOptHover").eq(0);if(t.is("span"))l=t;else var l=$(this).find(".cuselActive").eq(0);return cuselActivePrev=l.prev(),!!cuselActivePrev.is("span")&&($(this).find(".cuselText").eq(0).text(cuselActivePrev.text()),l.removeClass("cuselOptHover"),cuselActivePrev.addClass("cuselOptHover"),$(this).find("input").eq(0).val(cuselActivePrev.attr("val")),cuselScrollToCurent($(this).find(".cusel-scroll-wrap").eq(0)),!1)}if(27==s){var r=$(this).find(".cuselActive").eq(0).text();$(this).removeClass("cuselOpen").find(".cusel-scroll-wrap").eq(0).css("display","none").end().find(".cuselOptHover").eq(0).removeClass("cuselOptHover"),$(this).find(".cuselText").eq(0).text(r)}if(13==s){var n=$(this).find(".cuselOptHover").eq(0);if(n.is("span"))$(this).find(".cuselActive").removeClass("cuselActive"),n.addClass("cuselActive");else $(this).find(".cuselActive").attr("val");$(this).removeClass("cuselOpen").find(".cusel-scroll-wrap").eq(0).css("display","none").end().find(".cuselOptHover").eq(0).removeClass("cuselOptHover"),$(this).find("input").eq(0).change()}return 32==s&&$.browser.opera&&cuselShowList($(this).find(".cusel-scroll-wrap").eq(0)),!$.browser.opera&&void 0});var e=[];jQuery(".cusel").keypress(function(s){function i(){var s=[];for(var i in e)window.event?s[i]=e[i].keyCode:e[i]&&(s[i]=e[i].which),s[i]=String.fromCharCode(s[i]).toUpperCase();var t,r=jQuery(l).find("span"),n=r.length;for(t=0;t<n;t++){var a=!0;for(var o in e)r.eq(t).text().charAt(o).toUpperCase()!=s[o]&&(a=!1);if(a){jQuery(l).find(".cuselOptHover").removeClass("cuselOptHover").end().find("span").eq(t).addClass("cuselOptHover").end().end().find(".cuselText").eq(0).text(r.eq(t).text()),cuselScrollToCurent($(l).find(".cusel-scroll-wrap").eq(0)),e=e.splice,e=[];break}}e=e.splice,e=[]}var t;if(window.event?t=window.event.keyCode:s&&(t=s.which),null==t||0==t||9==t)return!0;if(-1!=jQuery(this).prop("class").indexOf("classDisCusel"))return!1;var l=this;e.push(s),clearTimeout(jQuery.data(this,"timer"));var r=setTimeout(function(){i()},500);return jQuery(this).data("timer",r),(!jQuery.browser.opera||9==window.event.keyCode)&&void 0})}jQuery(e.changedEl).each(function(t){var l=jQuery(this),r=(l.outerWidth(),l.prop("class")),n=l.prop("id")?l.prop("id"):"cuSel-"+t,a=l.prop("name"),o=l.val(),c=l.find("option[value='"+o+"']").eq(0),u=c.text(),d=l.prop("disabled"),p=e.scrollArrows,h=l.prop("onchange"),v=l.prop("tabindex"),f=l.prop("multiple");if(!n||f)return!1;var w=l.data("events"),g=[];w&&w.change&&$.each(w.change,function(e,s){g[g.length]=s}),d?(classDisCuselText="classDisCuselLabel",classDisCusel="classDisCusel"):(classDisCuselText="",classDisCusel=""),p&&(classDisCusel+=" cuselScrollArrows"),c.addClass("cuselActive");var m=l.html().replace(/option/gi,"span").replace(/value=/gi,"val=");if($.browser&&parseInt($.browser.version)<9){var b=/(val=)(.*?)(>)/g;m=m.replace(b,"$1'$2'$3")}var x='<div class="cusel '+r+" "+classDisCusel+'" id=cuselFrame-'+n+' tabindex="'+v+'"><div class="cuselFrameRight"></div><div class="cuselText">'+u+'</div><div class="cusel-scroll-wrap"><div class="cusel-scroll-pane" id="cusel-scroll-'+n+'">'+m+'</div></div><input type="hidden" id="'+n+'" name="'+a+'" value="'+o+'" /></div>';l.replaceWith(x),h&&jQuery("#"+n).bind("change",h),g.length&&$.each(g,function(e,s){$("#"+n).bind("change",s)});var C,y=jQuery("#cuselFrame-"+n),j=y.find("span");j.eq(0).text()?C=j.eq(0).innerHeight():(C=j.eq(1).innerHeight(),j.eq(0).css("height",j.eq(1).height())),j.length>e.visRows?y.find(".cusel-scroll-wrap").eq(0).css({height:C*e.visRows+"px",display:"none",visibility:"visible"}).children(".cusel-scroll-pane").css("height",C*e.visRows+"px"):y.find(".cusel-scroll-wrap").eq(0).css({display:"none",visibility:"visible"});var S=jQuery("#cusel-scroll-"+n).find("span[addTags]"),q=S.length;for(i=0;i<q;i++)S.eq(i).append(S.eq(i).attr("addTags")).removeAttr("addTags");s()}),jQuery(".cusel").focus(function(){jQuery(this).addClass("cuselFocus")}),jQuery(".cusel").blur(function(){jQuery(this).removeClass("cuselFocus")}),jQuery(".cusel").hover(function(){jQuery(this).addClass("cuselFocus")},function(){jQuery(this).removeClass("cuselFocus")})}!function(e){e.jScrollPaneCusel={active:[]},e.fn.jScrollPaneCusel=function(s){s=e.extend({},e.fn.jScrollPaneCusel.defaults,s);var i=function(){return!1};return this.each(function(){function t(){var e=(K-I)/s.animateStep;e>1||e<-1?E(I+e):(E(K),ee())}var l=e(this),r=this.parentNode.offsetWidth;l.css("overflow","hidden");var n=this;if(e(this).parent().is(".jScrollPaneContainer")){var a=s.maintainPosition?l.position().top:0,o=e(this).parent(),c=r,u=d=o.outerHeight();e(">.jScrollPaneTrack, >.jScrollArrowUp, >.jScrollArrowDown",o).remove(),l.css({top:0})}else{a=0;this.originalPadding=l.css("paddingTop")+" "+l.css("paddingRight")+" "+l.css("paddingBottom")+" "+l.css("paddingLeft"),this.originalSidePaddingTotal=(parseInt(l.css("paddingLeft"))||0)+(parseInt(l.css("paddingRight"))||0);var c=r,d=l.innerHeight(),u=d;l.wrap("<div class='jScrollPaneContainer'></div>").parent().css({height:d+"px",width:c+"px"}),window.navigator.userProfile||(c-=parseInt(e(this).parent().css("border-left-width"))+parseInt(e(this).parent().css("border-right-width")),e(this).css("width",c+"px").parent().css("width",c+"px")),e(document).bind("emchange",function(e,i,t){l.jScrollPaneCusel(s)})}if(s.reinitialiseOnImageLoad){var p=e.data(n,"jScrollPaneImagesToLoad")||e("img",l),h=[];p.length&&p.each(function(i,t){e(this).bind("load",function(){-1==e.inArray(i,h)&&(h.push(t),p=e.grep(p,function(e,s){return e!=t}),e.data(n,"jScrollPaneImagesToLoad",p),s.reinitialiseOnImageLoad=!1,l.jScrollPaneCusel(s))}).each(function(e,s){(this.complete||void 0===this.complete)&&(this.src=this.src)})})}var v=this.originalSidePaddingTotal,f={height:"auto",width:c-s.scrollbarWidth-s.scrollbarMargin-v+"px"};s.scrollbarOnLeft?f.paddingLeft=s.scrollbarMargin+s.scrollbarWidth+"px":f.paddingRight=s.scrollbarMargin+"px",l.css(f);var w=l.outerHeight(),g=d/w;if(g<.99){var m=l.parent();m.append(e('<div class="jScrollPaneTrack"></div>').css({width:s.scrollbarWidth+"px"}).append(e('<div class="jScrollPaneDrag"></div>').css({width:s.scrollbarWidth+"px"}).append(e('<div class="jScrollPaneDragTop"></div>').css({width:s.scrollbarWidth+"px"}),e('<div class="jScrollPaneDragBottom"></div>').css({width:s.scrollbarWidth+"px"}))));var b=e(">.jScrollPaneTrack",m),x=e(">.jScrollPaneTrack .jScrollPaneDrag",m);if(s.showArrows){var C,y,j,S,q=function(){(S>4||S%4==0)&&E(I+y*D),S++},O=function(s){e("html").unbind("mouseup",O),C.removeClass("jScrollActiveArrowButton"),clearInterval(j)},A=function(){e("html").bind("mouseup",O),C.addClass("jScrollActiveArrowButton"),S=0,q(),j=setInterval(q,100)};m.append(e("<div></div>").attr({class:"jScrollArrowUp"}).css({width:s.scrollbarWidth+"px"}).bind("mousedown",function(){return C=e(this),y=-1,A(),this.blur(),!1}).bind("click",i),e("<div></div>").attr({class:"jScrollArrowDown"}).css({width:s.scrollbarWidth+"px"}).bind("mousedown",function(){return C=e(this),y=1,A(),this.blur(),!1}).bind("click",i));var $=e(">.jScrollArrowUp",m),P=e(">.jScrollArrowDown",m);if(s.arrowSize)u=d-s.arrowSize-s.arrowSize,b.css({height:u+"px",top:s.arrowSize+"px"});else{var T=$.height();s.arrowSize=T,u=d-T-P.height(),b.css({height:u+"px",top:T+"px"})}}var H,Q,D,k=e(this).css({position:"absolute",overflow:"visible"}),I=0,L=g*d/2,R=function(e,s){var i="X"==s?"Left":"Top";return e["page"+s]||e["client"+s]+(document.documentElement["scroll"+i]||document.body["scroll"+i])||0},M=function(){return!1},W=function(){ee(),(H=x.offset()).top-=I,Q=u-x[0].offsetHeight,D=2*s.wheelSpeed*Q/w},F=function(s){return W(),L=R(s,"Y")-I-H.top,e("html").bind("mouseup",z).bind("mousemove",B),e.browser&&e("html").bind("dragstart",M).bind("selectstart",M),!1},z=function(){e("html").unbind("mouseup",z).unbind("mousemove",B),L=g*d/2,e.browser&&e("html").unbind("dragstart",M).unbind("selectstart",M)},E=function(e){I=e=e<0?0:e>Q?Q:e,x.css({top:e+"px"});var i=e/Q;k.css({top:(d-w)*i+"px"}),l.trigger("scroll"),s.showArrows&&($[0==e?"addClass":"removeClass"]("disabled"),P[e==Q?"addClass":"removeClass"]("disabled"))},B=function(e){E(R(e,"Y")-H.top-L)},U=Math.max(Math.min(g*(d-2*s.arrowSize),s.dragMaxHeight),s.dragMinHeight);x.css({height:U+"px"}).bind("mousedown",F);var Y,X,N,Z=function(){(X>8||X%4==0)&&E(I-(I-N)/2),X++},_=function(){clearInterval(Y),e("html").unbind("mouseup",_).unbind("mousemove",G)},G=function(e){N=R(e,"Y")-H.top-L},J=function(s){W(),G(s),X=0,e("html").bind("mouseup",_).bind("mousemove",G),Y=setInterval(Z,100),Z()};b.bind("mousedown",J),m.bind("mousewheel",function(e,s){W(),ee();E(I-s*D);return!1});var K,V,ee=function(){V&&(clearInterval(V),delete K)},se=function(i,r){if("string"==typeof i){if($e=e(i,l),!$e.length)return;i=$e.offset().top-l.offset().top}m.scrollTop(0),ee();var n=-i/(d-w)*Q;r||!s.animateTo?E(n):(K=n,V=setInterval(t,s.animateInterval))};l[0].scrollTo=se,l[0].scrollBy=function(e){var s=-parseInt(k.css("top"))||0;se(s+e)},W(),se(-a,!0),e("*",this).bind("focus",function(i){for(var t=e(this),r=0;t[0]!=l[0];)r+=t.position().top,t=t.offsetParent();var n=-parseInt(k.css("top"))||0,a=n+d;if(!(r>n&&r<a)){var o=r-s.scrollbarMargin;r>n&&(o+=e(this).height()+15+s.scrollbarMargin-d),se(o)}}),location.hash&&se(location.hash),e(document).bind("click",function(s){if($target=e(s.target),$target.is("a")){var i=$target.attr("href");"#"==i.substr(0,1)&&se(i)}}),e.jScrollPaneCusel.active.push(l[0])}else l.css({height:d+"px",width:c-this.originalSidePaddingTotal+"px",padding:this.originalPadding}),l.parent().unbind("mousewheel")})},e.fn.jScrollPaneRemoveCusel=function(){e(this).each(function(){$this=e(this);var s=$this.parent();s.is(".jScrollPaneContainer")&&($this.css({top:"",height:"",width:"",padding:"",overflow:"",position:""}),$this.attr("style",$this.data("originalStyleTag")),s.after($this).remove())})},e.fn.jScrollPaneCusel.defaults={scrollbarWidth:10,scrollbarMargin:5,wheelSpeed:18,showArrows:!1,arrowSize:0,animateTo:!1,dragMinHeight:1,dragMaxHeight:99999,animateInterval:100,animateStep:3,maintainPosition:!0,scrollbarOnLeft:!1,reinitialiseOnImageLoad:!1},e(window).bind("unload",function(){for(var s=e.jScrollPaneCusel.active,i=0;i<s.length;i++)s[i].scrollTo=s[i].scrollBy=null})}(jQuery),function(e){function s(s){var i=s||window.event,t=[].slice.call(arguments,1),l=0,r=0,n=0;return s=e.event.fix(i),s.type="mousewheel",i.wheelDelta&&(l=i.wheelDelta/120),i.detail&&(l=-i.detail/3),n=l,void 0!==i.axis&&i.axis===i.HORIZONTAL_AXIS&&(n=0,r=-1*l),void 0!==i.wheelDeltaY&&(n=i.wheelDeltaY/120),void 0!==i.wheelDeltaX&&(r=-1*i.wheelDeltaX/120),t.unshift(s,l,r,n),(e.event.dispatch||e.event.handle).apply(this,t)}var i=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks)for(var t=i.length;t;)e.event.fixHooks[i[--t]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=i.length;e;)this.addEventListener(i[--e],s,!1);else this.onmousewheel=s},teardown:function(){if(this.removeEventListener)for(var e=i.length;e;)this.removeEventListener(i[--e],s,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(jQuery);